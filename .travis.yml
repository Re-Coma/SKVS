sudo: required

#language: cpp
#compiler: gcc
#os: linux

services:
  - docker

branches:
  only:
    - master

before_install: #change to centos
  - sudo apt-get update
  - echo 'DOCKER_OPTS="-H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock -s devicemapper"' | sudo tee /etc/default/docker > /dev/null
  - sudo service docker restart
  - sleep 5
  - sudo docker pull centos:centos${OS_VERSION}


#install:
  #protoc
  #- curl -L https://github.com/google/protobuf/releases/download/v3.9.0/protoc-3.9.0-linux-x86_64.zip -o /tmp/protoc.zip
  #- unzip /tmp/protoc.zip -d "$HOME"/protoc
  #- mkdir -p "$HOME"/src && ln -s "$HOME"/protoc "$HOME"/src/protobuf
  #- sudo apt-get install libprotobuf-dev protobuf-compiler
  #- sudo apt-get install libprotoc-dev
  
env:
  matrix: #change to centos
    - OS_TYPE=centos OS_VERSION=7
  #- PATH=$HOME/protoc/bin:$PATH

script:
  - sh setup_tests.sh ${OS_VERSION}
  #- source /etc/profile
  #- make all

notifications:
  email: false

#before_install:
#    - eval "${MATRIX_EVAL}"